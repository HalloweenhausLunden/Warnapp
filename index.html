<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pandora Lagezentrum</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="overlay-box">
    <h1>Pandora Warnmeldung</h1>
    <p>Bewahren Sie Ruhe und informieren Sie sich hier über aktuelle Anweisungen.</p>

    <div id="infected-count">🧠 Infizierte in der Nähe: 0</div>
    <div id="countdown-label">Wartezeit bis zur nächsten Kohorten - Evakuierung:</div>
    <div id="timer">00:10:00</div>

    <button id="hotline-button">📞 Hilfe-Hotline anrufen</button>
    <button id="info-button">🦠 Infektionsanzeichen</button>
  </div>

  <!-- Popups -->
  <div id="popup-hotline" class="popup">
    <p>📡 Zur Zeit sind alle Leitungen belegt, versuchen Sie es später noch einmal.</p>
    <button onclick="closePopup('popup-hotline')">Fenster schließen</button>
  </div>

  <div id="popup-symptoms" class="popup">
    <h3>Verdächtige Symptome:</h3>
    <ul style="text-align:left;">
      <li>⚠️ Leichtes Zittern trotz Wärme</li>
      <li>🧠 Verlangsamte Sprache & starrer Blick</li>
      <li>🩸 Blässe oder blutunterlaufene Augen</li>
      <li>🥩 Starker Hunger</li>
      <li>🤢 Starke Übelkeit</li>
    </ul>
    <button onclick="closePopup('popup-symptoms')">Fenster schließen</button>
  </div>

  <div id="popup-kohorte" class="popup">
    <p>📣 Bitte bilden Sie eine Kohorte mit max. 5 Personen!</p>
    <button onclick="closePopup('popup-kohorte')">Verstanden</button>
  </div>

  <!-- Newsband -->
  <div class="news-banner">
    <div class="news-text">
      ⚠️ Stromausfall in Teilen von Lunden – Techniker unterwegs • 🌀 Sturmböen erwartet ab 22 Uhr • 📢 Sicherheitszone an der Schule am Gehölz eingerichtet • 🧣 Kirche abgeriegelt • 🚨 Hamburg abgeriegelt • 📢 Bundeswehr benachrichtigt • ⚠️ Drohnen gestartet • 🚨 Bilden sie Kohorten mit max. 5 Personen • ⚠️ Halten sie Abstand • 📢 Nehmen sie nur das Nötigste mit • 🚨 Katastrophenschutz eingetroffen • ⚠️ Dem Personal ist unbedingt Folge zu leisten •   
    </div>
     <div class="news-text">
      ⚠️ Stromausfall in Teilen von Lunden – Techniker unterwegs • 🌀 Sturmböen erwartet ab 22 Uhr • 📢 Sicherheitszone an der Schule am Gehölz eingerichtet • 🧣 Kirche abgeriegelt • 🚨 Hamburg abgeriegelt • 📢 Bundeswehr benachrichtigt • ⚠️ Drohnen gestartet • 🚨 Bilden sie Kohorten mit max. 5 Personen • ⚠️ Halten sie Abstand • 📢 Nehmen sie nur das Nötigste mit • 🚨 Katastrophenschutz eingetroffen • ⚠️ Dem Personal ist unbedingt Folge zu leisten •   
    </div>
  </div>

  <!-- Sounds -->
  <audio id="busy-sound" src="busy-sound.mp3" preload="auto"></audio>
  <audio id="alert-sound" src="alert-signal.mp3" preload="auto"></audio>

  <script>
    function closePopup(id) {
      document.getElementById(id).style.display = "none";
    }

    function showPopup(id) {
      document.getElementById(id).style.display = "block";
    }

    // Countdown alle 10 Minuten ab 16:00 Uhr
    function updateCountdown() {
      const timerElement = document.getElementById("timer");
      const now = new Date();
      const start = new Date();
      start.setHours(16, 0, 0, 0);

      if (now < start) {
        timerElement.textContent = "⏳ Noch nicht gestartet";
        return;
      }

      const elapsed = Math.floor((now - start) / 1000);
      const remainder = 600 - (elapsed % 600);
      const minutes = Math.floor(remainder / 60);
      const seconds = remainder % 60;

      timerElement.textContent = `${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;
    }

    // Infizierten-Zähler ab 16:00 Uhr bis Mitternacht
    function updateInfectedCount() {
      const countElement = document.getElementById("infected-count");
      const now = new Date();
      const start = new Date();
      start.setHours(16, 0, 0, 0);
      const end = new Date();
      end.setHours(24, 0, 0, 0);

      if (now < start) {
        countElement.textContent = "🧠 Infizierte in der Nähe: 0";
        return;
      }

      const elapsed = Math.floor((now - start) / 1000);
      const infected = Math.min(999, Math.floor(elapsed / 30));
      countElement.textContent = `🧠 Infizierte in der Nähe: ${infected}`;
    }

    // Buttons aktivieren
    document.addEventListener("DOMContentLoaded", function () {
      document.getElementById("hotline-button").addEventListener("click", function () {
        document.getElementById("busy-sound").play();
        showPopup("popup-hotline");
      });

      document.getElementById("info-button").addEventListener("click", function () {
        document.getElementById("alert-sound").play();
        showPopup("popup-symptoms");
      });

      // Wiederholende Updates
      setInterval(updateCountdown, 1000);
      setInterval(updateInfectedCount, 1000);
      setInterval(function () {
        showPopup("popup-kohorte");
      }, 30000);
    });
  </script>
</body>
</html>
